import{d as e,r as a,o as s,k as o,a as l,g as n,f as r,e as t,w as d,b as c,i as p,t as u,_ as i}from"./index-CdSAAqTC.js";import{i as v}from"./ipcRenderer-CjF5QmVd.js";import{s as f,i as m}from"./index-B8zeLGbR.js";const k={id:"app-updater"},_={class:"one-block-2"},w={class:"one-block-2"},b=i(e({__name:"Index",setup(e){const i=a(0),b=a(""),g=a(0);return s((()=>{v.removeAllListeners(f.appUpdater),v.on(f.appUpdater,((e,a)=>{a=JSON.parse(a),i.value=a.status,3==a.status?(b.value=a.desc,g.value=a.percentNumber):o.info(a.desc)}))})),(e,a)=>{const s=l("a-button"),f=l("a-space"),x=l("a-progress");return c(),n("div",k,[a[4]||(a[4]=r("div",{class:"one-block-1"},[r("span",null," 1. 自动更新 ")],-1)),r("div",_,[t(f,null,{default:d((()=>[t(s,{onClick:a[0]||(a[0]=e=>{v.invoke(m.framework.checkForUpdater).then((e=>{console.log(e)}))})},{default:d((()=>a[2]||(a[2]=[p("检查更新")]))),_:1}),t(s,{onClick:a[1]||(a[1]=e=>{1===i.value?v.invoke(m.framework.downloadApp).then((e=>{console.log(e)})):o.info("没有可用版本")})},{default:d((()=>a[3]||(a[3]=[p("下载并安装")]))),_:1})])),_:1})]),a[5]||(a[5]=r("div",{class:"one-block-1"},[r("span",null," 2. 下载进度 ")],-1)),r("div",w,[t(x,{percent:g.value,status:"active"},null,8,["percent"]),t(f,null,{default:d((()=>[p(u(b.value),1)])),_:1})])])}}}),[["__scopeId","data-v-e80d8cdb"],["__file","/Users/gsx/www/gofile/src/ee/ee-demo-ts/frontend/src/views/framework/updater/Index.vue"]]);export{b as default};
